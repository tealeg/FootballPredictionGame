<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  </head>
  <body>
    <div id="app">
    </div>
    <script>

      var firstUser = new Vue({
	  el: '#app',
	  data: {
	      adminUserExists: null,
	  },
	  watch: { adminUserExists: 'handleAdminExists' }
	  created: function(){ this.fetchData()},
	  methods: {
	      fetchData: function () {
		  var xhr = new XMLHttpRequest()
		  var self = this
		  xhr.open("GET", '/user/admin/exists')
		  xhr.onload = function () {
		      self.adminUserExists = JSON.parse(xhr.responseText)
		  }
		  xhr.send()
	      },
	      handleAdminExists: function() {
		  if this.adminUserExists {
		      window.location.href = "/login"
		  } else {
		      window.location.href = "/firstuser"
		  }
		  
	      }
	  }
      })
    </script>
  </body>
</html>
